!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.Splitting=t()}(this,(function(){"use strict";var n=document,t=n.createTextNode.bind(n);function e(n,t,e){n.style.setProperty(t,e)}function r(n,t){return n.appendChild(t)}function i(t,e,i,o){var u=n.createElement("span");return e&&(u.className=e),i&&(!o&&u.setAttribute("data-"+e,i),u.textContent=i),t&&r(t,u)||u}function o(n,t){return n.getAttribute("data-"+t)}function u(t,e){return t&&0!=t.length?t.nodeName?[t]:[].slice.call(t[0].nodeName?t:(e||n).querySelectorAll(t)):[]}function c(n){for(var t=[];n--;)t[n]=[];return t}function a(n,t){n&&n.some(t)}function s(n){return function(t){return n[t]}}var l={};function f(n,t,e){var r=e.indexOf(n);if(-1==r)e.unshift(n),a(l[n].depends,(function(t){f(t,n,e)}));else{var i=e.indexOf(t);e.splice(r,1),e.splice(i,0,n)}return e}function d(n,t,e,r){return{by:n,depends:t,key:e,split:r}}function p(n){return f(n,0,[]).map(s(l))}function h(n){l[n.by]=n}function m(n,e,o,c,s){n.normalize();var l=[],f=document.createDocumentFragment();c&&l.push(n.previousSibling);var d=[];return u(n.childNodes).some((function(n){if(!n.tagName||n.hasChildNodes()){if(n.childNodes&&n.childNodes.length)return d.push(n),void l.push.apply(l,m(n,e,o,c,s));var r=n.wholeText||"",u=r.trim();u.length&&(" "===r[0]&&d.push(t(" ")),a(u.split(o),(function(n,t){t&&s&&d.push(i(f,"whitespace"," ",s));var r=i(f,e,n);l.push(r),d.push(r)}))," "===r[r.length-1]&&d.push(t(" ")))}else d.push(n)})),a(d,(function(n){r(f,n)})),n.innerHTML="",r(n,f),l}var g="words",v=d(g,0,"word",(function(n){return m(n,"word",/\s+/,0,1)})),y="chars",w=d(y,[g],"char",(function(n,t,e){var r=[];return a(e.words,(function(n,e){r.push.apply(r,m(n,"char","",t.whitespace&&e))})),r}));function b(n){var t=(n=n||{}).key;return u(n.target||"[data-splitting]").map((function(r){var i=r["üçå"];if(!n.force&&i)return i;i=r["üçå"]={el:r};var u=p(n.by||o(r,"splitting")||y),c=function(n,t){for(var e in t)n[e]=t[e];return n}({},n);return a(u,(function(n){if(n.split){var o=n.by,u=(t?"-"+t:"")+n.key,s=n.split(r,c,i);u&&function(n,t,r){var i="--"+t,o=i+"-index";a(r,(function(n,t){Array.isArray(n)?a(n,(function(n){e(n,o,t)})):e(n,o,t)})),e(n,i+"-total",r.length)}(r,u,s),i[o]=s,r.classList.add(o)}})),r.classList.add("splitting"),i}))}function N(n,t,e){var r=u(t.matching||n.children,n),i={};return a(r,(function(n){var t=Math.round(n[e]);(i[t]||(i[t]=[])).push(n)})),Object.keys(i).map(Number).sort(x).map(s(i))}function x(n,t){return n-t}b.html=function(n){var t=(n=n||{}).target=i();return t.innerHTML=n.content,b(n),t.outerHTML},b.add=h;var T=d("lines",[g],"line",(function(n,t,e){return N(n,{matching:e.words},"offsetTop")})),L=d("items",0,"item",(function(n,t){return u(t.matching||n.children,n)})),k=d("rows",0,"row",(function(n,t){return N(n,t,"offsetTop")})),A=d("cols",0,"col",(function(n,t){return N(n,t,"offsetLeft")})),C=d("grid",["rows","cols"]),M="layout",S=d(M,0,0,(function(n,t){var c=t.rows=+(t.rows||o(n,"rows")||1),a=t.columns=+(t.columns||o(n,"columns")||1);if(t.image=t.image||o(n,"image")||n.currentSrc||n.src,t.image){var s=u("img",n)[0];t.image=s&&(s.currentSrc||s.src)}t.image&&e(n,"background-image","url("+t.image+")");for(var l=c*a,f=[],d=i(0,"cell-grid");l--;){var p=i(d,"cell");i(p,"cell-inner"),f.push(p)}return r(n,d),f})),H=d("cellRows",[M],"row",(function(n,t,e){var r=t.rows,i=c(r);return a(e.layout,(function(n,t,e){i[Math.floor(t/(e.length/r))].push(n)})),i})),O=d("cellColumns",[M],"col",(function(n,t,e){var r=t.columns,i=c(r);return a(e.layout,(function(n,t){i[t%r].push(n)})),i})),j=d("cells",["cellRows","cellColumns"],"cell",(function(n,t,e){return e.layout}));return h(v),h(w),h(T),h(L),h(k),h(A),h(C),h(S),h(H),h(O),h(j),b}));