!function(t,i){"use strict";var e=function(t,i){var e=t.find(".bdt-astoria-slider"),n=e.data("settings");if(e.length){i(".bdt-astoria-slider").on("mousemove",".slide.slide--current",(function(t){var e=t.clientY/16-4.25+"rem",s=t.clientX/16-4.25+"rem";i(this).find("svg.textcircle").css("top",e),i(this).find("svg.textcircle").css("left",s)}));var a=void 0!==n.targets&&n.targets;new s(document.querySelector(n.id),a)}};class s{constructor(t,i){this.DOM={},this.DOM.el=t,this.settings={animation:{slides:{duration:600,easing:"easeOutQuint"},shape:{duration:300,easing:{in:"easeOutQuint",out:"easeOutQuad"}}},targets:i},this.init()}init(){this.DOM.slides=Array.from(this.DOM.el.querySelectorAll(".slides > .slide")),this.slidesTotal=this.DOM.slides.length,this.DOM.nav=this.DOM.el.querySelector(".bdt-slidenav-wrap"),this.DOM.nextCtrl=this.DOM.nav.querySelector(".bdt-slidenav-item-next"),this.DOM.prevCtrl=this.DOM.nav.querySelector(".bdt-slidenav-item-prev"),this.current=0,this.createFrame(),this.initEvents()}createFrame(){this.rect=this.DOM.el.getBoundingClientRect(),this.frameSize=this.rect.width/12,this.paths={initial:this.calculatePath("initial"),final:this.calculatePath("final")},this.DOM.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.DOM.svg.setAttribute("class","shape"),this.DOM.svg.setAttribute("width","100%"),this.DOM.svg.setAttribute("height","100%"),this.DOM.svg.setAttribute("viewbox",`0 0 ${this.rect.width} ${this.rect.height}`),this.DOM.svg.innerHTML=`<path fill="${this.settings.frameFill}" d="${this.paths.initial}"/>`,this.DOM.el.insertBefore(this.DOM.svg,this.DOM.nav),this.DOM.shape=this.DOM.svg.querySelector("path")}updateFrame(){this.paths.initial=this.calculatePath("initial"),this.paths.final=this.calculatePath("final"),this.DOM.svg.setAttribute("viewbox",`0 0 ${this.rect.width} ${this.rect.height}`),this.DOM.shape.setAttribute("d",this.isAnimating?this.paths.final:this.paths.initial)}calculatePath(t="initial"){return"initial"===t?`M 0,0 0,${this.rect.height} ${this.rect.width},${this.rect.height} ${this.rect.width},0 0,0 Z M 0,0 ${this.rect.width},0 ${this.rect.width},${this.rect.height} 0,${this.rect.height} Z`:`M 0,0 0,${this.rect.height} ${this.rect.width},${this.rect.height} ${this.rect.width},0 0,0 Z M ${this.frameSize},${this.frameSize} ${this.rect.width-this.frameSize},${this.frameSize} ${this.rect.width-this.frameSize},${this.rect.height-this.frameSize} ${this.frameSize},${this.rect.height-this.frameSize} Z`}initEvents(){var t,i,e,s;this.DOM.nextCtrl.addEventListener("click",(()=>this.navigate("next"))),this.DOM.prevCtrl.addEventListener("click",(()=>this.navigate("prev"))),window.addEventListener("resize",(t=()=>{this.rect=this.DOM.el.getBoundingClientRect(),this.updateFrame()},i=20,function(){var n=this,a=arguments,h=e&&!s;clearTimeout(s),s=setTimeout((function(){s=null,e||t.apply(n,a)}),i),h&&t.apply(n,a)})),document.addEventListener("keydown",(t=>{const i=t.keyCode||t.which;37===i?this.navigate("prev"):39===i&&this.navigate("next")}))}navigate(t="next"){if(this.isAnimating)return!1;this.isAnimating=!0;anime({targets:this.DOM.shape,duration:this.settings.animation.shape.duration,easing:this.settings.animation.shape.easing.in,d:this.paths.final}).finished.then((()=>new Promise(((i,e)=>{const s=this.DOM.slides[this.current];anime({targets:s,duration:this.settings.animation.slides.duration,easing:this.settings.animation.slides.easing,translateX:"next"===t?-1*this.rect.width:this.rect.width,complete:()=>{s.classList.remove("slide--current"),i()}}),this.current="next"===t?this.current<this.slidesTotal-1?this.current+1:0:this.current>0?this.current-1:this.slidesTotal-1;const n=this.DOM.slides[this.current];n.classList.add("slide--current"),anime({targets:n,duration:this.settings.animation.slides.duration,easing:this.settings.animation.slides.easing,translateX:["next"===t?this.rect.width:-1*this.rect.width,0]});const a=n.querySelector(".bdt-slide-img");anime.remove(a),anime({targets:a,duration:4*this.settings.animation.slides.duration,easing:this.settings.animation.slides.easing,translateX:["next"===t?200:-200,0]}),!1!==this.settings.targets&&anime({targets:[n.querySelectorAll(this.settings.targets)],duration:2*this.settings.animation.slides.duration,easing:this.settings.animation.slides.easing,delay:(t,i)=>100*i+100,translateX:["next"===t?300:-300,0],opacity:[0,1]})})))).then((()=>{anime({targets:this.DOM.shape,duration:this.settings.animation.shape.duration,delay:150,easing:this.settings.animation.shape.easing.out,d:this.paths.initial,complete:()=>this.isAnimating=!1})}))}}jQuery(window).on("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/prime-slider-astoria.default",e)}))}(jQuery,window.elementorFrontend);