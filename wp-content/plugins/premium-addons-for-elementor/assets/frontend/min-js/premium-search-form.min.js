!function(e){function a(t,s){var e=t.data("id"),o=(t=s(".elementor-element-"+e)).find(".premium-search__container"),d=o.data("settings"),i=t.find(".premium-search__input"),l=t.find(".premium-search__spinner"),n=d.query,a=d.buttonAction,c=null;if("post"===n){var p=t.find(".premium-search__query-wrap"),r=1;d.hideOnClick&&s("body").on("click",function(e){s(e.target).is(t.find(".premium-search__container, .premium-search__container *, .premium-search__query-wrap, .premium-search__query-wrap *"))||p.html("").addClass("query-hidden")})}function u(e){setTimeout(function(){var e=i.val();if(!o.hasClass("fetching")&&e!==c){if("post"===n&&p.html("").addClass("query-hidden"),"elements"!==n)""!==e&&s.ajax({url:PremiumSettings.ajaxurl,dataType:"json",type:"POST",data:{action:"premium_get_search_results",nonce:PremiumSettings.nonce,page_id:o.data("page"),page_number:1,widget_id:t.data("id"),query:e,post_type:o.find(".premium-search__type-select").val()},beforeSend:function(){o.find(".premium-search__remove-wrap").addClass("premium-addons__v-hidden"),l.append('<div class="premium-loading-feed"><div class="premium-loader"></div></div>'),o.addClass("fetching")},success:function(e){if(e.data){var a,r,i,s=e.data.posts,n=e.data.pagination;l.find(".premium-loading-feed").remove(),o.find(".premium-search__remove-wrap").removeClass("premium-addons__v-hidden"),p.html(s).removeClass("query-hidden"),d.carousel&&p.find(".premium-search__posts-wrap").slick((a=getComputedStyle(t[0]).getPropertyValue("--pa-search-carousel-slides"),r=d.arrows?'<a type="button" data-role="none" class="carousel-arrow carousel-prev" aria-label="Previous" role="button" style=""><i class="fas fa-angle-left" aria-hidden="true"></i></a>':"",i=d.arrows?'<a type="button" data-role="none" class="carousel-arrow carousel-next" aria-label="Next" role="button" style=""><i class="fas fa-angle-right" aria-hidden="true"></i></a>':"",{infinite:!1,draggable:!0,autoplay:!1,slidesToShow:a=parseInt(100/a.substr(0,a.indexOf("%"))),slidesToScroll:d.slidesToScroll||a,rows:d.rows,speed:d.speed,nextArrow:i,prevArrow:r,fade:d.fade,centerMode:d.center,centerPadding:d.spacing+"px",dots:d.dots,customPaging:function(){return'<i class="fas fa-circle"></i>'}})),m(),""!==n&&(p.append("<div class='premium-search__footer'></div>"),p.find(".premium-search__footer").html(n)),o.removeClass("fetching")}},error:function(e){console.log(e),l.find(".premium-loading-feed").remove(),o.removeClass("fetching")}});else{var a=s(d.target).find("li,h1,h2,h3,h4,h5,h6,p,span,i"),r=s(d.fadeout_target).find("li,h1,h2,h3,h4,h5,h6,p,span,i");if(a.css("transition","filter 0.3s ease-in-out"),r.css("transition","opacity 0.3s ease-in-out"),a.css("filter","blur(0px)"),r.css("opacity","1"),""!==e)e=e.trim().toLowerCase(),a.filter(function(){return-1==s(this).text().toLowerCase().indexOf(e)}).css("filter","blur(3px)"),r.css("opacity","0.4");else a.css("filter","blur(0px)"),r.css("opacity","1")}c=e}},"remove"===e?10:"elements"===n?100:1e3)}function m(){var i=new Array,e=o.find(".premium-search__post-content");e.each(function(e,a){var r=s(a).outerHeight();i.push(r)});var a=Math.max.apply(null,i);e.css("height",a+"px")}"onpage"===a?(o.on("click",".premium-search__btn",u),i.on("keyup",function(){var e=i.val();e!==c&&"post"===n&&p.html("").addClass("query-hidden"),""===e&&(s(d.target).find("li,h1,h2,h3,h4,h5,h6,p,span,i").css("filter","blur(0px)"),s(d.fadeout_target).find("li,h1,h2,h3,h4,h5,h6,p,span,i").css("opacity","1"))})):o.on("click",".premium-search__btn",function(){var e=i.val(),a=o.find(".premium-search__type-select").val()||[];window.location.href=d.search_link+"?s="+e+"&post_type[]="+a}),o.on("click",".premium-search__remove-wrap",function(){i.val(""),u("remove")}),o.find(".premium-search__type-select").on("change",function(){c="",u()}),i.on("keyup",u),document.addEventListener("keydown",function(e){o.hasClass("is-focused")&&13===e.keyCode&&u()}),i.on("focus blur",function(e){o.toggleClass("is-focused"),"focus"===e.type&&(c="",u())}),t.hasClass("premium-search-anim-label-letter")&&(i.on("focus",function(){var e=parseFloat(o.find("label").css("letter-spacing").replace("px",""));o.find("label").css("letter-spacing",e+3+"px")}),i.on("blur",function(){var e=parseFloat(o.find("label").css("letter-spacing").replace("px",""));o.find("label").css("letter-spacing",e-3+"px")})),t.on("click",".premium-search-form__pagination-container .page-numbers",function(e){if(e.preventDefault(),!s(this).hasClass("current")){var a=parseInt(t.find(".page-numbers.current").html());r=s(this).hasClass("next")?a+1:s(this).hasClass("prev")?a-1:s(this).html(),s.ajax({url:PremiumSettings.ajaxurl,dataType:"json",type:"POST",data:{action:"premium_get_search_results",nonce:PremiumSettings.nonce,page_id:o.data("page"),page_number:r,widget_id:t.data("id"),query:c,post_type:o.find(".premium-search__type-select").val()},beforeSend:function(){o.find(".premium-search__remove-wrap").addClass("premium-addons__v-hidden"),p.append('<div class="premium-loading-feed"><div class="premium-loader"></div></div>'),o.addClass("fetching")},success:function(e){if(e.data){var a=e.data.posts,r=e.data.pagination;p.find(".premium-loading-feed").remove(),o.find(".premium-search__remove-wrap").removeClass("premium-addons__v-hidden"),p.html(a).removeClass("query-hidden"),m(),p.append("<div class='premium-search__footer'></div>"),p.find(".premium-search__footer").html(r),o.removeClass("fetching")}},error:function(e){console.log(e),l.find(".premium-loading-feed").remove(),o.removeClass("fetching")}})}})}e(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/premium-search-form.default",a)})}(jQuery);